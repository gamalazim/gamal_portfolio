<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Project II: Demand Forecasting | Gamal Abdel-Azim</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.72.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="https://github.com/gamalazim/gamal_portfolio/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      

    

    
    
    <meta property="og:title" content="Project II: Demand Forecasting" />
<meta property="og:description" content="Demand forecasting: random forest or linear regression?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://github.com/gamalazim/gamal_portfolio/post/project-2/" />
<meta property="article:published_time" content="2020-04-10T11:00:59-04:00" />
<meta property="article:modified_time" content="2020-04-10T11:00:59-04:00" />
<meta itemprop="name" content="Project II: Demand Forecasting">
<meta itemprop="description" content="Demand forecasting: random forest or linear regression?">
<meta itemprop="datePublished" content="2020-04-10T11:00:59-04:00" />
<meta itemprop="dateModified" content="2020-04-10T11:00:59-04:00" />
<meta itemprop="wordCount" content="1639">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Project II: Demand Forecasting"/>
<meta name="twitter:description" content="Demand forecasting: random forest or linear regression?"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://github.com/gamalazim/gamal_portfolio/images/ensemble.jpg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://github.com/gamalazim/gamal_portfolio/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Gamal Abdel-Azim
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://github.com/gamalazim/gamal_portfolio/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://github.com/gamalazim/gamal_portfolio/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://github.com/gamalazim/gamal_portfolio/post/" title="Projects page">
              Projects
            </a>
          </li>
          
        </ul>
      
      




<a href="https://twitter.com/abdel_azim" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/gamal-abdel-azim-986a40122/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/gamalazim" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Project II: Demand Forecasting</h1>
          
            <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              Demand forecasting: random forest or linear regression?
            </h2>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://github.com/gamalazim/gamal_portfolio/post/project-2/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://github.com/gamalazim/gamal_portfolio/post/project-2/&amp;text=Project%20II:%20Demand%20Forecasting" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://github.com/gamalazim/gamal_portfolio/post/project-2/&amp;title=Project%20II:%20Demand%20Forecasting" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Project II: Demand Forecasting</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-04-10T11:00:59-04:00">April 10, 2020</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h1 id="summary">Summary</h1>
<p>The objective of forecasting was to optimize production capacity and design a pricing strategy. In this project, approaches to predict aggregate demand per product per period were developed. A demand period spanned 3 - 4 months and product attributes were updated from a period to the next. Machine learning approaches applied included linear regression, decision trees, and random forest regressors form scikit-learn. RMSE was the metric used to compare models with ensemble approaches showing better results than linear regression. Additional accuracy was further reached by including sales relationships between products. Regularizing overfitting, implementing neural networks, clustering, and dimensionality reduction will be discussed in the next set of projects.</p>
<h1 id="data">Data</h1>
<p>I will be discussing here my methods of data cleaning, imputing, sampling, and transformation. Pipelines to manage numerical and categorical features will be devised and referenced in future project outlines. The first step was to query and load the data into Python (several million records), please see Project I, <em>The Database Component</em>, for details.</p>
<p>The following code starts with the pandas DataFrame, <em>df</em>, for sales data with 155 fields, mainly, product attributes to predict demand in the next period of each product. Eight unused product features were dropped due to lack of variability.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># df: a pandas DataFrame for sales data</span>
len(df<span style="color:#f92672">.</span>columns)  <span style="color:#75715e"># 155 variables</span>
df[<span style="color:#e6db74">&#34;ProdCode&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Master.Code&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>slice(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">10</span>)  <span style="color:#75715e"># First 10 chars to ID product codes  </span>
df<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;Master.Code&#39;</span>, <span style="color:#e6db74">&#39;ProdName&#39;</span>, <span style="color:#e6db74">&#39;Released&#39;</span>, <span style="color:#e6db74">&#39;AO&#39;</span>, <span style="color:#e6db74">&#39;GA&#39;</span>, <span style="color:#e6db74">&#39;GAEU&#39;</span>, <span style="color:#e6db74">&#39;New.FS&#39;</span>, <span style="color:#e6db74">&#39;New.GS&#39;</span>], axis <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, inplace<span style="color:#f92672">=</span>True)
</code></pre></div><p>Let&rsquo;s look at product demand per period, labeled as units sold over the past 120 days. A histogram showed that the concentration of sales falls below 5,000 units with a few products selling up to 40,000 units per period.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt  
df <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#34;Result.Units.120d.Conv&#34;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>] <span style="color:#75715e"># Make sure you have products with reported sales</span>
df[<span style="color:#e6db74">&#34;Result.Units.120d.Conv&#34;</span>]<span style="color:#f92672">.</span>hist()
</code></pre></div><p><img src="https://github.com/gamalazim/gamal_portfolio/images/salesHist.png" alt="matplotlib, histogram of sales"></p>
<p>Let&rsquo;s add and test an attribute for unit price in previous period. The correlations below show previous unit price to positively correlate with demand in the current period, unlike current unit price which negatively correlates with demand. It is interesting that an increase in price in the previous period predicted a future increase in demand (4.2%) and was more effective than current price (-2.7%).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># create average receivable-price variable</span>
Receivable_Price_120d_Conv <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Result.Sales.120d.Conv&#34;</span>]<span style="color:#f92672">/</span>df[<span style="color:#e6db74">&#34;Result.Units.120d.Conv&#34;</span>]
df[<span style="color:#e6db74">&#34;Prev_Receivable_Price_120d_Conv&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Prev.Sales.120d.Conv&#34;</span>]<span style="color:#f92672">/</span>df[<span style="color:#e6db74">&#34;Prev.Units.120d.Conv&#34;</span>]

<span style="color:#75715e"># Test correlation with demand</span>
price_corr_matrix <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
    <span style="color:#e6db74">&#39;Demand&#39;</span>: df[<span style="color:#e6db74">&#34;Result.Units.120d.Conv&#34;</span>],
    <span style="color:#e6db74">&#39;Prev_Receivable_Price_120d_Conv&#39;</span>: df[<span style="color:#e6db74">&#34;Prev_Receivable_Price_120d_Conv&#34;</span>],
    <span style="color:#e6db74">&#39;Receivable_Price_120d_Conv&#39;</span>: Receivable_Price_120d_Conv})<span style="color:#f92672">.</span>corr()

price_corr_matrix[<span style="color:#e6db74">&#34;Demand&#34;</span>]<span style="color:#f92672">.</span>sort_values(ascending <span style="color:#f92672">=</span> False)
<span style="color:#75715e"># Demand                             1.000000</span>
<span style="color:#75715e"># Prev_Receivable_Price_120d_Conv    0.042131</span>
<span style="color:#75715e"># Receivable_Price_120d_Conv        -0.026995</span>
</code></pre></div><p>In my sampling of data, I needed to look carefully into product stage to ensure that the probabilities of sampling young and mature products were the same, i.e., stratified sampling.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">df[<span style="color:#e6db74">&#34;stage&#34;</span>]<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">/</span>len(df)
<span style="color:#75715e"># Old          0.383579</span>
<span style="color:#75715e"># Mature       0.297053</span>
<span style="color:#75715e"># Emerging     0.170947</span>
<span style="color:#75715e"># Young        0.148421</span>
</code></pre></div><p>Split data into training and test sets using stratified sampling over product maturity.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># Stratified sampling of training and test sets --</span>
<span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> StratifiedShuffleSplit
split <span style="color:#f92672">=</span> StratifiedShuffleSplit(n_splits <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, test_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, random_state <span style="color:#f92672">=</span> <span style="color:#ae81ff">62220</span>)
<span style="color:#66d9ef">for</span> train_index, test_index <span style="color:#f92672">in</span> split<span style="color:#f92672">.</span>split(df, df[<span style="color:#e6db74">&#34;stage&#34;</span>]):
    strat_train <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[train_index]
    strat_test <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[test_index]
</code></pre></div><h3 id="check-and-manage-variables-with-nas-in-data">Check and Manage Variables with NA&rsquo;s in Data</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">na_cols <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>columns[df<span style="color:#f92672">.</span>isna()<span style="color:#f92672">.</span>any()]<span style="color:#f92672">.</span>tolist()
<span style="color:#66d9ef">print</span>(na_cols)
<span style="color:#75715e"># [&#39;Haplotypes&#39;, &#39;CP.Stars.Total.Final&#39;, &#39;Obs.Conv&#39;, &#39;CP.Stat&#39;, &#39;CP.Stat.Prev&#39;, &#39;Lost.CP.Stat&#39;, &#39;New.CP.Stat&#39;]</span>
</code></pre></div><p>Impute NA&rsquo;s in 5 categorical features, leaving numerical parameters for the transformation pipeline below</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">impute_parms <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;zero&#34;</span>: <span style="color:#e6db74">&#39;H00&#39;</span>,
    <span style="color:#e6db74">&#34;unk&#34;</span>: <span style="color:#e6db74">&#34;UNK&#34;</span>
}
strat_train[<span style="color:#e6db74">&#34;Haplotypes&#34;</span>]<span style="color:#f92672">.</span>fillna(impute_parms[<span style="color:#e6db74">&#34;zero&#34;</span>], inplace<span style="color:#f92672">=</span>True)
<span style="color:#66d9ef">for</span> col <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;CP.Stat&#39;</span>, <span style="color:#e6db74">&#39;CP.Stat.Prev&#39;</span>, <span style="color:#e6db74">&#39;Lost.CP.Stat&#39;</span>, <span style="color:#e6db74">&#39;New.CP.Stat&#39;</span>]:
    strat_train[col]<span style="color:#f92672">.</span>fillna(impute_parms[<span style="color:#e6db74">&#34;unk&#34;</span>], inplace<span style="color:#f92672">=</span>True)
</code></pre></div><h3 id="categorical-attributes">Categorical Attributes</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">cat_cols <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;ProdCode&#34;</span>, <span style="color:#e6db74">&#34;stage&#34;</span>, <span style="color:#e6db74">&#34;USDARED&#34;</span>, <span style="color:#e6db74">&#34;USDAPOLL&#34;</span>, <span style="color:#e6db74">&#34;Haplotypes&#34;</span>,
            <span style="color:#e6db74">&#34;Market.Status&#34;</span>, <span style="color:#e6db74">&#34;Avail.Sorted&#34;</span>, <span style="color:#e6db74">&#34;Market.Status.Prev&#34;</span>,
            <span style="color:#e6db74">&#34;...&#34;</span>
            ]
</code></pre></div><p>The categorical attributes listed above were not ordinal in nature, hence, I used one-hot-encoding as follows,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> OneHotEncoder
cat_encoder <span style="color:#f92672">=</span> OneHotEncoder()
fit_cat_1hot <span style="color:#f92672">=</span> cat_encoder<span style="color:#f92672">.</span>fit(strat_train[cat_cols])
train_cat_1hot <span style="color:#f92672">=</span> fit_cat_1hot<span style="color:#f92672">.</span>transform(strat_train[cat_cols])
train_cat_1hot  <span style="color:#75715e">## sparse matrix you can use toarray to transform to dense as: train_cat_1hot.toarray()</span>
fit_cat_1hot<span style="color:#f92672">.</span>categories_  <span style="color:#75715e"># look at the categories</span>
</code></pre></div><p>Next, I extracted numerical attributes by removing categorical columns and all labels in data.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">num_cols <span style="color:#f92672">=</span> strat_train<span style="color:#f92672">.</span>columns<span style="color:#f92672">.</span>tolist()  <span style="color:#75715e"># all variables</span>
<span style="color:#75715e"># Remove categorical attributes</span>
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> cat_cols:
    num_cols<span style="color:#f92672">.</span>remove(i)
<span style="color:#75715e"># Drop labels</span>
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;Result.Units.120d.Conv&#39;</span>,<span style="color:#e6db74">&#39;Result.Sales.120d.Conv&#39;</span>,<span style="color:#e6db74">&#39;Result.Sale.Price.120d.Conv&#39;</span>]:
    num_cols<span style="color:#f92672">.</span>remove(i)
</code></pre></div><h3 id="data-pipelines">Data pipelines</h3>
<p>The following is a pipeline to be applied to all columns with numerical attributes. The pipeline imputes missing values by the median and then standardizes variables. Standardization was chosen over a min-max scaling or normalization as it&rsquo;s less impacted by extreme values.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.pipeline <span style="color:#f92672">import</span> Pipeline
<span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> StandardScaler
<span style="color:#f92672">from</span> sklearn.impute <span style="color:#f92672">import</span> SimpleImputer
num_pipeline <span style="color:#f92672">=</span> Pipeline([
    (<span style="color:#e6db74">&#39;imputer&#39;</span>, SimpleImputer(strategy<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;median&#34;</span>)),  
    (<span style="color:#e6db74">&#39;std_scaler&#39;</span>, StandardScaler())
])
train_num <span style="color:#f92672">=</span> num_pipeline<span style="color:#f92672">.</span>fit_transform(strat_train[num_cols])

<span style="color:#75715e"># Just make sure NA&#39;s are gone from the numerical feature set</span>
x <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(train_num)
x<span style="color:#f92672">.</span>columns[x<span style="color:#f92672">.</span>isna()<span style="color:#f92672">.</span>any()]
<span style="color:#75715e"># Int64Index([], dtype=&#39;int64&#39;)</span>
</code></pre></div><p>Note that the numerical set is dense and the categorical set is sparse
Need to use the <em>sparse.hstack</em> of <em>scipy</em> to concatenate results. A better, more flexible approach was to use a full pipeline for the complete data set as explained next,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> sparse
<span style="color:#75715e"># compressed sparse row (CSR)</span>
demand_train <span style="color:#f92672">=</span> sparse<span style="color:#f92672">.</span>hstack((sparse<span style="color:#f92672">.</span>csr_matrix(train_num), train_cat_1hot))
demand_train
<span style="color:#75715e"># &lt;36846200x920 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;</span>
<span style="color:#75715e">#	with 5084775600 stored elements in COOrdinate format&gt;</span>
</code></pre></div><h3 id="full-pipeline-for-data-transformation">Full Pipeline for Data Transformation</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.compose <span style="color:#f92672">import</span> ColumnTransformer
num_features <span style="color:#f92672">=</span> num_cols
cat_features <span style="color:#f92672">=</span> cat_cols
full_pipeline <span style="color:#f92672">=</span> ColumnTransformer([(<span style="color:#e6db74">&#34;num&#34;</span>, num_pipeline, num_features),
                                   (<span style="color:#e6db74">&#34;cat&#34;</span>, OneHotEncoder(), cat_features)
                                  ])
demand_prepared <span style="color:#f92672">=</span> full_pipeline<span style="color:#f92672">.</span>fit_transform(strat_train)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">demand_labels <span style="color:#f92672">=</span> strat_train[<span style="color:#e6db74">&#34;Result.Units.120d.Conv&#34;</span>]  
</code></pre></div><h3 id="model-training---linear-regression">Model training - Linear Regression</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LinearRegression
lin_reg <span style="color:#f92672">=</span> LinearRegression()
lin_reg<span style="color:#f92672">.</span>fit(demand_prepared, demand_labels)
</code></pre></div><p>Use root mean squared error (RMSE) for model evaluation. Let&rsquo;s get the training RMSE and extend this to cross validation on the training set. Plot predictions against labels. Leave the test set for now.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.metrics <span style="color:#f92672">import</span> mean_squared_error
demand_predictions_lr <span style="color:#f92672">=</span> lin_reg<span style="color:#f92672">.</span>predict(demand_prepared)
lin_mse <span style="color:#f92672">=</span> mean_squared_error(demand_labels, demand_predictions_lr)
lin_rmse <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(lin_mse)
lin_rmse
<span style="color:#75715e"># 1956.5036291045276</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># Function to scatter-plot labels against their predictions</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">act_pred_plt</span>(act, pred):
    dt <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
        {<span style="color:#e6db74">&#39;actual&#39;</span>: act,
         <span style="color:#e6db74">&#39;predicted&#39;</span>: pred
        })
    dt<span style="color:#f92672">.</span>plot(kind <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scatter&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;actual&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;predicted&#34;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">act_pred_plt(demand_labels, demand_predictions_lr)
</code></pre></div><p><img src="https://github.com/gamalazim/gamal_portfolio/images/linregscatter.png" alt="matplotlib, lin reg of predictions against labels"></p>
<p>Comments: linear regression is off by 1957 units on average in the training set. With the bulk of sales occurring below 5000, this is not very encouraging, given also that this is not on the testing set yet. It is also seen from the scatter plot that forecasting greater values was harder for the linear model than forecasting smaller demand values. Let&rsquo;s <strong>cross-validate</strong> and output results of 10 validation runs,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python">lin_scores <span style="color:#f92672">=</span> cross_val_score(lin_reg, demand_prepared, demand_labels, scoring <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;neg_mean_squared_error&#34;</span>, cv<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
lin_rmse_scores <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(<span style="color:#f92672">-</span>lin_scores)

<span style="color:#75715e"># Function to sort and round the list of CV scores. Print score mean and sd.</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">display_scores</span>(scores):
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Scores:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, sorted([round(elem, <span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">for</span> elem <span style="color:#f92672">in</span> scores]))
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Mean:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, round(scores<span style="color:#f92672">.</span>mean(), <span style="color:#ae81ff">3</span>))
    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Standard deviation:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, round(scores<span style="color:#f92672">.</span>std(), <span style="color:#ae81ff">3</span>))

display_scores(lin_rmse_scores)
</code></pre></div><p>Scores: [2211.813, 2339.044, 2370.376, 2435.664, 2567.425, 2587.825, 2604.18, 2680.654, 2877.227, 3552.533]</p>
<p>Mean: 2622.674</p>
<p>Standard deviation: 358.509</p>
<p>So the linear model did much worse after cross validation. Let&rsquo;s try something else.</p>
<h3 id="model-training---decision-tree">Model Training - Decision Tree</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.tree <span style="color:#f92672">import</span> DecisionTreeRegressor
tree_reg <span style="color:#f92672">=</span> DecisionTreeRegressor()
tree_reg<span style="color:#f92672">.</span>fit(demand_prepared, demand_labels)

demand_predictions_dt <span style="color:#f92672">=</span> tree_reg<span style="color:#f92672">.</span>predict(demand_prepared )
tree_mse <span style="color:#f92672">=</span> mean_squared_error(demand_labels, demand_predictions_dt)
tree_rmse <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(tree_mse)
tree_rmse
<span style="color:#75715e"># 0</span>
</code></pre></div><p>As usual with similar data, decision trees tend to overfit the data in an extreme way as seen from the prediction RMSE (tree_rmse = 0.0, above) and from the plot below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># Plot labels against their DT predictions</span>
act_pred_plt(demand_labels, demand_predictions_dt)
</code></pre></div><p><img src="https://github.com/gamalazim/gamal_portfolio/images/dtscatter.png" alt="matplotlib, DT of predictions against labels"></p>
<p>Cross validation &ndash; DT Model</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> cross_val_score
scores <span style="color:#f92672">=</span> cross_val_score(tree_reg, demand_prepared, demand_labels, scoring <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;neg_mean_squared_error&#34;</span>, cv <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
tree_rmse_scores <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(<span style="color:#f92672">-</span>scores)
display_scores(tree_rmse_scores)
</code></pre></div><p>Scores: [3168.295, 3195.792, 3361.942, 3476.098, 3509.0, 3672.029, 3705.098, 3825.107, 3852.623, 3884.771]</p>
<p>Mean: 3565.075</p>
<p>Standard deviation: 250.934</p>
<p>A RMSE of 3565 on average of 10 runs! This is much worse than the linear model and the overfitting is apparent here, as RMSE jumped from 0.0 on the full training set to an average of 3565 on set-aside cross validation sets! Forget decision trees and let&rsquo;s try an ensemble approach such, <em>the random forest</em>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#f92672">from</span> sklearn.ensemble <span style="color:#f92672">import</span> RandomForestRegressor
forest_reg <span style="color:#f92672">=</span> RandomForestRegressor(n_estimators<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>)
forest_reg<span style="color:#f92672">.</span>fit(demand_prepared, demand_labels)
forest_scores <span style="color:#f92672">=</span> cross_val_score(forest_reg, demand_prepared, demand_labels, scoring <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;neg_mean_squared_error&#34;</span>, cv<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
forest_rmse_scores <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>sqrt(<span style="color:#f92672">-</span>forest_scores)
display_scores(forest_rmse_scores)
</code></pre></div><p>Scores:
[2123.065, 2279.599, 2332.962, 2393.419, 2491.102, 2523.255, 2643.393, 2696.719, 2784.257, 3016.167]</p>
<p>Mean:
2528.394</p>
<p>Standard deviation:
250.792</p>
<p>At 2528, this is the lowest RMSE so far! Precision as indicated by the std dev of estimates is also lower than that of the linear model.</p>
<p>Let&rsquo;s now plot random forest performance (brown) against linear regression performance (blue).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Python" data-lang="Python"><span style="color:#75715e"># Random Forest vs. Linear Regression</span>
plt<span style="color:#f92672">.</span>scatter(demand_labels, demand_predictions_lr, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>)
plt<span style="color:#f92672">.</span>scatter(demand_labels, demand_prediction_rf, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;brown&#39;</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>)
plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><img src="https://github.com/gamalazim/gamal_portfolio/images/rfscatter.png" alt="matplotlib, RF of predictions against labels">
Ensemble approaches such as RF were more precise and achieved better RMSE than linear regression. Also overfitting was not as bad as with decision trees. The combined plot below shows that random forest regressor performed good overall but in particular with large sales. This is an indication that clustering to identify extreme demand spikes in certain periods and then using cluster affiliations as added attributes should further aid the forecasting process.</p>
<h3 id="final-comments-and-conclusions">Final Comments and Conclusions</h3>
<p>In this project, I also implemented <strong>a deep neural network</strong> for predicting product demand per period. However, we also continued with the regression prediction equation for the purpose of optimizing production capacity and receivable price of each product (not shown here). <strong>Reinforcement learning</strong> was looked at for optimizing prices. I will be adding results of reinforcement learning versus conventional calculus-based price optimization in the near future.</p>
<p>Variations that improved accuracy significantly were,</p>
<ul>
<li>
<p>I added sales relationships among products in the preceding period. Proportion of sales of a product relative to sales of all other products in the preceding period were used as numerical predictors. This improved the accuracy significantly but it also added about 700 more attributes to the training and required an upstream predictor (instead of a simple imputer) for missing values (emerging and young products had no previous sales/prices). Although the improvement in accuracy was attractive, I also explored the feasibility of those added features and the best way to include them. One way was to use principal components on product relationships as predictors instead of using the raw proportions.</p>
</li>
<li>
<p>Total product sales per period were mostly below 5000 with some large international sales occurring ‘randomly’ in some periods and resulting in large offsets in sales. Clustering products based on their eligibility for these large spikes in demand in certain periods further improved the accuracy of the forecasting process.</p>
</li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://github.com/gamalazim/gamal_portfolio" >
    &copy;  Gamal Abdel-Azim 2020 
  </a>
    <div>




<a href="https://twitter.com/abdel_azim" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/gamal-abdel-azim-986a40122/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/gamalazim" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

    

  <script src="https://github.com/gamalazim/gamal_portfolio/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
